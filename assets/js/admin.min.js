!function(i){"use strict";var e,t,c,l=i("#shaplaFieldList");function d(){l.find(".dcf-toggle").each(function(t){i(this).find("input,textarea,select").each(function(){var e=i(this).attr("name");e&&i(this).attr("name",e.replace(/\[\d+\]/g,"["+t+"]"))})})}function a(e){"page"===e?(i(".col-redirect-url").slideUp("first"),i(".col-redirect-page_id").slideDown("first")):"url"===e?(i(".col-redirect-page_id").slideUp("first"),i(".col-redirect-url").slideDown("first")):(i(".col-redirect-page_id").slideUp("first"),i(".col-redirect-url").slideUp("first"))}i(".dcf-fields-list").draggable({connectToSortable:"#shaplaFieldList",helper:"clone",stop:function(e,t){i.ajax({method:"POST",url:ajaxurl,data:{action:"dcf_field_settings",type:i(this).data("type")},success:function(e){t.helper.replaceWith(e),l.find(".dcf-toggle").each(function(){i(this).accordion({header:".dcf-toggle-title",collapsible:!0,heightStyle:"content",active:!1})}),l.find(".dcf-date-picker").each(function(){i(this).datepicker({dateFormat:"yy-mm-dd"})}),d()}})}}),l.on("click",".deleteField",function(e){e.preventDefault(),!0===confirm("Are you sure to delete this field?")&&(i(this).closest(".dcf-toggle").remove(),d())}),l.on("keydown keyup",".dcf-field-title",function(){e=i(this),t=e.val(),(c=e.closest(".dcf-toggle")).find(".dcf-toggle-title--label").text(t),c.find(".dcf-field-placeholder").val(t),c.find(".dcf-field-id").val(t.replace(/[\W_]+/g,"_").toLowerCase())}),l.sortable({placeholder:"ui-state-highlight",stop:function(){d()}}),i(document).find(".dcf-toggle").each(function(){"closed"===i(this).data("id")?i(this).accordion({header:".dcf-toggle-title",collapsible:!0,heightStyle:"content",active:!1}):i(this).accordion({header:".dcf-toggle-title",collapsible:!0,heightStyle:"content"})}),i("#dcf-metabox-tabs").tabs(),i(".dcf-colorpicker").each(function(){i(this).wpColorPicker({palettes:["#f5f5f5","#212121","#00d1b2","#009688","#2196f3","#4caf50","#ffc107","#f44336"]})}),i(document).find(".dcf-date-picker").each(function(){i(this).datepicker({dateFormat:"yy-mm-dd"})}),i(document).ready(function(){i("select.select2").select2(),i("#actions_after_submit_actions").select2().on("select2:select",function(){var e=i(this).val();i.each(e,function(e,t){i("#action-"+t).slideDown("fast")})}).on("select2:unselect",function(e){var t=e.params.data.id;i("#action-"+t).slideUp("fast")})}),i(document).on("change","#redirect_redirect_to",function(){a(i(this).find(":selected").val())}),i(document).ready(function(){a(i("#redirect_redirect_to").find(":selected").val())}),i(document).on("change","#mailchimp_mailchimp_api_key_source",function(){var e=i(this).find(":selected").val();"custom"===e?i(".col-mailchimp_api_key").slideDown("first"):i(".col-mailchimp_api_key").slideUp("first")})}(jQuery);